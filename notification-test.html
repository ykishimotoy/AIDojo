<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é€šçŸ¥ãƒ†ã‚¹ãƒˆ - ã™ã”ã„AIé“å ´</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #000814;
            border-bottom: 3px solid #f46434;
            padding-bottom: 15px;
        }
        .test-section {
            margin: 20px 0;
            padding: 20px;
            background: #f8f8f8;
            border-radius: 8px;
            border-left: 4px solid #4a90e2;
        }
        button {
            background: #f46434;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin: 5px;
            transition: all 0.3s ease;
        }
        button:hover {
            background: #d84a1b;
            transform: translateY(-2px);
        }
        button.secondary {
            background: #4a90e2;
        }
        button.secondary:hover {
            background: #3a7bc8;
        }
        .info {
            padding: 15px;
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            margin: 15px 0;
            border-radius: 4px;
        }
        .warning {
            padding: 15px;
            background: #fff3e0;
            border-left: 4px solid #ff9800;
            margin: 15px 0;
            border-radius: 4px;
        }
        .success {
            padding: 15px;
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            margin: 15px 0;
            border-radius: 4px;
        }
        pre {
            background: #263238;
            color: #aed581;
            padding: 15px;
            border-radius: 6px;
            overflow-x: auto;
        }
        code {
            font-family: 'Courier New', monospace;
            background: #263238;
            color: #aed581;
            padding: 2px 6px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ§ª é€šçŸ¥ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ</h1>

        <div class="info">
            <strong>ã“ã®ãƒšãƒ¼ã‚¸ã®ç›®çš„:</strong><br>
            ãƒ¬ãƒƒã‚¹ãƒ³å®Œäº†æ™‚ã«ã©ã®é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚
        </div>

        <div class="test-section">
            <h2>ğŸ“‹ ç¾åœ¨ã®è¨­å®šçŠ¶æ…‹</h2>
            <p>script.jsã®é€šçŸ¥è¨­å®šã‚’ç¢ºèªã—ã¾ã™ï¼š</p>
            <button onclick="checkNotificationStatus()">é€šçŸ¥çŠ¶æ…‹ã‚’ç¢ºèª</button>
            <div id="statusResult" style="margin-top: 15px;"></div>
        </div>

        <div class="test-section">
            <h2>ğŸ¬ é€šçŸ¥ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³</h2>

            <h3>1. å‹•ç”»å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ï¼ˆæ®‹ã™ã¹ãé€šçŸ¥ï¼‰</h3>
            <p>ã“ã®é€šçŸ¥ã¯<strong>è¡¨ç¤ºã•ã‚Œã‚‹ã¹ã</strong>ã§ã™ï¼š</p>
            <button onclick="testVideoCompletion()">å‹•ç”»å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ãƒ†ã‚¹ãƒˆ</button>

            <h3>2. ãƒãƒƒã‚¸ç²å¾—é€šçŸ¥ï¼ˆå‰Šé™¤ã™ã¹ãé€šçŸ¥ï¼‰</h3>
            <p>ã“ã®é€šçŸ¥ã¯<strong>è¡¨ç¤ºã•ã‚Œãªã„ã¹ã</strong>ã§ã™ï¼š</p>
            <button onclick="testBadgeNotification()">ãƒãƒƒã‚¸ç²å¾—é€šçŸ¥ã‚’ãƒ†ã‚¹ãƒˆ</button>
        </div>

        <div class="test-section">
            <h2>ğŸ” å®Ÿéš›ã®ãƒ¬ãƒƒã‚¹ãƒ³ã§ãƒ†ã‚¹ãƒˆ</h2>
            <p>å®Ÿéš›ã®ãƒ¬ãƒƒã‚¹ãƒ³ãƒšãƒ¼ã‚¸ã§é€šçŸ¥ã‚’ç¢ºèªã—ã¾ã™ï¼š</p>
            <ol>
                <li>ä¸‹ã®ãƒœã‚¿ãƒ³ã§localStorageã‚’ã‚¯ãƒªã‚¢</li>
                <li>ãƒ¬ãƒƒã‚¹ãƒ³ãƒšãƒ¼ã‚¸ã‚’é–‹ã</li>
                <li>å‹•ç”»ã‚’æœ€å¾Œã¾ã§å†ç”Ÿ</li>
                <li>è¡¨ç¤ºã•ã‚Œã‚‹é€šçŸ¥ã‚’ç¢ºèª</li>
            </ol>
            <button class="secondary" onclick="clearStorage()">localStorageã‚’ã‚¯ãƒªã‚¢</button>
            <button class="secondary" onclick="openLesson()">ãƒ¬ãƒƒã‚¹ãƒ³1ã‚’é–‹ã</button>
        </div>

        <div class="test-section">
            <h2>âœ… æœŸå¾…ã•ã‚Œã‚‹å‹•ä½œ</h2>
            <div class="success">
                <strong>âœ“ è¡¨ç¤ºã•ã‚Œã‚‹ã¹ãé€šçŸ¥:</strong>
                <ul>
                    <li>ğŸ‰ å‹•ç”»è¦–è´å®Œäº†ï¼</li>
                    <li>ãƒ¬ãƒƒã‚¹ãƒ³XXã®å‹•ç”»ã‚’æœ€å¾Œã¾ã§è¦–è´ã—ã¾ã—ãŸ</li>
                    <li>ãƒãƒƒã‚¸ç²å¾—ã®é€²æ—ãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã¾ã—ãŸ</li>
                </ul>
            </div>
            <div class="warning">
                <strong>âœ— è¡¨ç¤ºã•ã‚Œãªã„ã¹ãé€šçŸ¥:</strong>
                <ul>
                    <li>â­ ãƒãƒƒã‚¸ã‚’ç²å¾—ã—ã¾ã—ãŸï¼</li>
                    <li>æœ€åˆã®ä¸€æ­©</li>
                    <li>ãã®ä»–ã®ãƒãƒƒã‚¸åã‚„èª¬æ˜</li>
                </ul>
            </div>
        </div>

        <div class="test-section">
            <h2>ğŸ”§ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°</h2>

            <h3>å•é¡Œ: å¤ã„é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹</h3>
            <p><strong>åŸå› :</strong> ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¤ã„script.jsã‚’èª­ã¿è¾¼ã‚“ã§ã„ã‚‹</p>
            <p><strong>è§£æ±ºç­–:</strong></p>
            <ol>
                <li>ãƒãƒ¼ãƒ‰ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥: <code>Cmd+Shift+R</code> (Mac) ã¾ãŸã¯ <code>Ctrl+Shift+R</code> (Windows)</li>
                <li>ã¾ãŸã¯ä¸‹ã®ãƒœã‚¿ãƒ³ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢</li>
            </ol>
            <button class="secondary" onclick="clearCacheAndReload()">ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢ & ãƒªãƒ­ãƒ¼ãƒ‰</button>

            <h3>ç¢ºèªã‚³ãƒãƒ³ãƒ‰ï¼ˆé–‹ç™ºè€…ãƒ„ãƒ¼ãƒ«ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§å®Ÿè¡Œï¼‰</h3>
            <pre>// showBadgeNotificationé–¢æ•°ã®å†…å®¹ã‚’ç¢ºèª
console.log(badgeManager.showBadgeNotification.toString());

// æœŸå¾…ã•ã‚Œã‚‹çµæœ: æœ€åˆã®returnæ–‡ãŒã‚ã‚‹ã¯ãš
// å®Ÿéš›ã«é€šçŸ¥ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ¼ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œãªã„ã“ã¨ã‚’ç¢ºèª</pre>
        </div>

        <div class="test-section">
            <h2>ğŸ“ ãƒ†ã‚¹ãƒˆçµæœã®è¨˜éŒ²</h2>
            <textarea id="testResults" style="width: 100%; height: 150px; padding: 10px; border: 2px solid #e0e0e0; border-radius: 6px; font-family: monospace;" placeholder="ãƒ†ã‚¹ãƒˆçµæœã‚’ã“ã“ã«è¨˜éŒ²ã—ã¦ãã ã•ã„...&#10;&#10;ä¾‹:&#10;âœ“ å‹•ç”»å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚ŒãŸ&#10;âœ“ ãƒãƒƒã‚¸ç²å¾—é€šçŸ¥ã¯è¡¨ç¤ºã•ã‚Œãªã‹ã£ãŸ&#10;âœ— å•é¡Œ: ã¾ã ãƒãƒƒã‚¸ç²å¾—é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹"></textarea>
            <button style="margin-top: 10px;" onclick="saveTestResults()">çµæœã‚’ä¿å­˜ï¼ˆlocalStorageï¼‰</button>
            <button style="margin-top: 10px;" class="secondary" onclick="loadTestResults()">å‰å›ã®çµæœã‚’èª­ã¿è¾¼ã‚€</button>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Check notification status
        function checkNotificationStatus() {
            const resultDiv = document.getElementById('statusResult');

            let status = '<div class="info">';
            status += '<strong>é€šçŸ¥é–¢æ•°ã®çŠ¶æ…‹:</strong><br><br>';

            // Check if functions exist
            if (typeof showVideoCompletionMessage !== 'undefined') {
                status += 'âœ“ <code>showVideoCompletionMessage</code>: å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼ˆæ­£å¸¸ï¼‰<br>';
            } else {
                status += 'âœ— <code>showVideoCompletionMessage</code>: æœªå®šç¾©ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰<br>';
            }

            if (typeof badgeManager !== 'undefined' && badgeManager.showBadgeNotification) {
                const fnStr = badgeManager.showBadgeNotification.toString();
                const isDisabled = fnStr.includes('return;') && fnStr.indexOf('return;') < 200;

                if (isDisabled) {
                    status += 'âœ“ <code>badgeManager.showBadgeNotification</code>: ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ï¼ˆæ­£å¸¸ï¼‰<br>';
                } else {
                    status += 'âœ— <code>badgeManager.showBadgeNotification</code>: ã¾ã æœ‰åŠ¹ã§ã™ï¼ˆè¦ç¢ºèªï¼‰<br>';
                    status += '<br><div class="warning">è­¦å‘Š: ãƒãƒƒã‚¸é€šçŸ¥ãŒç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„ã€‚</div>';
                }
            } else {
                status += 'âœ— <code>badgeManager.showBadgeNotification</code>: æœªå®šç¾©ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰<br>';
            }

            status += '</div>';
            resultDiv.innerHTML = status;
        }

        // Test video completion message
        function testVideoCompletion() {
            if (typeof showVideoCompletionMessage !== 'undefined') {
                showVideoCompletionMessage(99);
                alert('å‹•ç”»å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã—ã¾ã—ãŸã€‚\nå³ä¸Šã«ç·‘è‰²ã®æ ã®é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚');
            } else {
                alert('ã‚¨ãƒ©ãƒ¼: showVideoCompletionMessageé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        // Test badge notification
        function testBadgeNotification() {
            if (typeof badgeManager !== 'undefined' && badgeManager.showBadgeNotification) {
                const testBadge = {
                    id: 'test',
                    name: 'ãƒ†ã‚¹ãƒˆãƒãƒƒã‚¸',
                    description: 'ã“ã‚Œã¯è¡¨ç¤ºã•ã‚Œãªã„ã¹ãã§ã™',
                    icon: 'â­',
                    color: '#ffd700'
                };
                badgeManager.showBadgeNotification(testBadge);

                setTimeout(() => {
                    alert('ãƒãƒƒã‚¸ç²å¾—é€šçŸ¥ã®ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã—ã¾ã—ãŸã€‚\n\nå³ä¸Šã«é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯ã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„ã€‚\nè¡¨ç¤ºã•ã‚Œãªã‹ã£ãŸå ´åˆã¯ã€æ­£å¸¸ã«ç„¡åŠ¹åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚');
                }, 500);
            } else {
                alert('ã‚¨ãƒ©ãƒ¼: badgeManager.showBadgeNotificationé–¢æ•°ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
            }
        }

        // Clear localStorage
        function clearStorage() {
            localStorage.removeItem('aiLearningCompletedLessons');
            localStorage.removeItem('aiLearningCompletedVideos');
            localStorage.removeItem('aiLearningBadges');
            alert('localStorageã‚’ã‚¯ãƒªã‚¢ã—ã¾ã—ãŸã€‚\næ¬¡ã«ãƒ¬ãƒƒã‚¹ãƒ³ãƒšãƒ¼ã‚¸ã§å‹•ç”»ã‚’è¦‹ã‚‹ã¨ã€æ–°ãŸã«é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚');
        }

        // Open lesson 1
        function openLesson() {
            window.open('howtoAI/01_ai-basics.html', '_blank');
        }

        // Clear cache and reload
        function clearCacheAndReload() {
            if (confirm('ãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ã€‚\n\nâ€» ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦ã¯å®Œå…¨ã«ã‚¯ãƒªã‚¢ã•ã‚Œãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚\nãã®å ´åˆã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã‹ã‚‰æ‰‹å‹•ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ã‚¯ãƒªã‚¢ã—ã¦ãã ã•ã„ã€‚')) {
                // Clear caches if available
                if ('caches' in window) {
                    caches.keys().then(names => {
                        names.forEach(name => caches.delete(name));
                    });
                }

                // Reload with cache clearing
                location.reload(true);
            }
        }

        // Save test results
        function saveTestResults() {
            const results = document.getElementById('testResults').value;
            localStorage.setItem('notificationTestResults', results);
            alert('ãƒ†ã‚¹ãƒˆçµæœã‚’ä¿å­˜ã—ã¾ã—ãŸ');
        }

        // Load test results
        function loadTestResults() {
            const results = localStorage.getItem('notificationTestResults');
            if (results) {
                document.getElementById('testResults').value = results;
                alert('å‰å›ã®ãƒ†ã‚¹ãƒˆçµæœã‚’èª­ã¿è¾¼ã¿ã¾ã—ãŸ');
            } else {
                alert('ä¿å­˜ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆçµæœãŒã‚ã‚Šã¾ã›ã‚“');
            }
        }

        // Auto-check on load
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(checkNotificationStatus, 500);
        });
    </script>
</body>
</html>
